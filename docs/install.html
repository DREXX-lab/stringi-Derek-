<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Installing stringi &mdash; stringi</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://stringi.gagolewski.com/install.html" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="What Is New in stringi" href="news.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> stringi
          

          
          </a>

          
            
            
              <div class="version">
                1.6.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">stringi</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://stringi.gagolewski.com/">About</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stringi.gagolewski.com/_static/vignette/stringi.pdf">Paper (Draft)</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rapi.html">R Package <em>stringi</em> Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/stringi">Source Code (GitHub)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/stringi/issues">Bug Tracker and Feature Suggestions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://cran.r-project.org/web/packages/stringi/">CRAN Entry</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com/">Author's Homepage</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/ExampleRcppStringi">C++ API — Rcpp Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html">What Is New in <em>stringi</em></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installing <em>stringi</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#icu4c">ICU4C</a></li>
<li class="toctree-l2"><a class="reference internal" href="#icu-data-library-and-no-internet-access">ICU Data Library and No Internet Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#c-11-issues">C++11 Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customising-the-build-process">Customising the Build Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">stringi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Installing <em>stringi</em></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
      
        <a href="news.html" class="btn btn-neutral float-left" title="What Is New in stringi" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-stringi">
<h1>Installing <em>stringi</em><a class="headerlink" href="#installing-stringi" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In 99.9% of cases, <em>stringi</em> can be successfully installed by simply calling:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, due to the overwhelming complexity of the ICU4C library,
upon which <em>stringi</em> is based, and the colourful diversity of operating systems,
their flavors, and particular setups, some users may still experience
a few issues that hopefully can be resolved with the help of this short manual.</p>
<p>Also, some additional build tweaks are possible in case we require a more
customised installation.</p>
</div>
<div class="section" id="icu4c">
<h2>ICU4C<a class="headerlink" href="#icu4c" title="Permalink to this headline">¶</a></h2>
<p>The stringi package depends on the ICU4C &gt;= 55 library.</p>
<p>If we install the package from sources and either:</p>
<ul class="simple">
<li><p>this requirement is not met (check out http://site.icu-project.org/download,
the <code class="docutils literal notranslate"><span class="pre">libicu-devel</span></code> rpm on Fedora/CentOS/OpenSUSE,
<code class="docutils literal notranslate"><span class="pre">libicu-dev</span></code> on Ubuntu/Debian, etc.),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> is fails to find appropriate build settings
for ICU-based projects, or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">CMD</span> <span class="pre">INSTALL</span></code> is called with the <code class="docutils literal notranslate"><span class="pre">--configure-args='--disable-pkg-config'</span></code>
argument or environment variable <code class="docutils literal notranslate"><span class="pre">STRINGI_DISABLE_PKG_CONFIG</span></code> is
set to non-zero or
<code class="docutils literal notranslate"><span class="pre">install.packages(&quot;stringi&quot;,</span> <span class="pre">configure.args=&quot;--disable-pkg-config&quot;)</span></code>
is executed,</p></li>
</ul>
<p>then ICU will be built together with stringi.
A custom subset of ICU4C 69.1 is shipped with the package.
We also include ICU4C 55.1 that can be used as a fallback version
(e.g., on older Solaris boxes).</p>
<blockquote>
<div><p>To get the most out of stringi, you are strongly encouraged to rely on our
ICU4C package bundle. This ensures maximum portability across all platforms
(Windows and macOS users by default fetch the pre-compiled binaries
from CRAN built exactly this way).</p>
</div></blockquote>
</div>
<div class="section" id="icu-data-library-and-no-internet-access">
<h2>ICU Data Library and No Internet Access<a class="headerlink" href="#icu-data-library-and-no-internet-access" title="Permalink to this headline">¶</a></h2>
<p>Note that if you choose to use our ICU4C bundle, then – by default – the
ICU data library will be downloaded from one of our mirror servers.
However, if you have already downloaded a version of <code class="docutils literal notranslate"><span class="pre">icudt*.zip</span></code> suitable
for your platform (big/little endian), you may wish to install the
package by calling:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi&quot;</span><span class="p">,</span> <span class="n">configure.vars</span><span class="o">=</span><span class="s">&quot;ICUDT_DIR=&lt;icudt_dir&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Moreover, if you have <strong>no internet access</strong> on the machines
you try to install stringi on, try fetching the latest development version
of the package, as it is shipped with the <code class="docutils literal notranslate"><span class="pre">ICU</span></code> data archives.
You can build a distributable source package that includes all the required
ICU data files (for off-line use) by omitting some relevant lines in
the <code class="docutils literal notranslate"><span class="pre">.Rbuildignore</span></code> file. The following command sequence should do the trick:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>wget https://github.com/gagolews/stringi/archive/master.zip -O stringi.zip
unzip stringi.zip
sed -i <span class="s1">&#39;/\/icu..\/data/d&#39;</span> stringi-master/.Rbuildignore
R CMD build stringi-master
</pre></div>
</div>
<p>Assuming the most recent development version of the package is numbered x.y.z,
a file named <code class="docutils literal notranslate"><span class="pre">stringi_x.y.z.tar.gz</span></code> is created in the current working directory.
The package can now be installed (the source bundle may be propagated via
<code class="docutils literal notranslate"><span class="pre">scp</span></code> etc.) by executing:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>R CMD INSTALL stringi_x.y.z.tar.gz
</pre></div>
</div>
<p>Alternatively, call from within an R session:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi_x.y.z.tar.gz&quot;</span><span class="p">,</span> <span class="n">repos</span><span class="o">=</span><span class="kc">NULL</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="c-11-issues">
<h2>C++11 Issues<a class="headerlink" href="#c-11-issues" title="Permalink to this headline">¶</a></h2>
<p>A decent C++11 compiler is required to build ICU4C 69.1 from sources.</p>
<p>Note that Pre-4.9.0 GCC has a
<a class="reference external" href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=56019">bug</a> where
<code class="docutils literal notranslate"><span class="pre">::max_align_t</span></code> has been defined, but not <code class="docutils literal notranslate"><span class="pre">std::max_align_t</span></code>.
If our built-in workaround does not work, you may try calling:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi&quot;</span><span class="p">,</span> <span class="n">configure.args</span><span class="o">=</span><span class="s">&quot;--with-extra-cxxflags=&#39;--std=c++11&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Overall, your build chain may be misconfigured, check out,
amongst others, <code class="docutils literal notranslate"><span class="pre">&lt;R_inst_dir&gt;/etc/Makeconf</span></code>
(e.g., are you using <code class="docutils literal notranslate"><span class="pre">--std=gnu++11</span></code> instead of <code class="docutils literal notranslate"><span class="pre">--std=c++11</span></code>?). Refer to
https://cran.r-project.org/doc/manuals/r-release/R-admin.html for more details.</p>
<p>There is an option of using the fallback version of ICU4C 55.1
which however requires the support of the <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code> type in a few functions,
(this is not part of the C++98 standard; works on Solaris, though). Try:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi&quot;</span><span class="p">,</span> <span class="n">configure.args</span><span class="o">=</span><span class="s">&quot;--disable-cxx11&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="customising-the-build-process">
<h2>Customising the Build Process<a class="headerlink" href="#customising-the-build-process" title="Permalink to this headline">¶</a></h2>
<p>Additional features and options of the <code class="docutils literal notranslate"><span class="pre">./configure</span></code> script:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--disable-cxx11</span></code>: Disable C++11; if you build ICU4C from
sources, make sure your C++ compiler supports the <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code> type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--disable-icu-bundle</span></code>: Enforce system ICU.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--disable-pkg-config</span></code>: Disable <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>;
ICU4C will be compiled from sources.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-cflags=FLAGS</span></code>: Additional C compiler flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-cppflags=FLAGS</span></code>: Additional C/C++ preprocessor flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-cxxflags=FLAGS</span></code>: Additional C++ compiler flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-ldflags=FLAGS</span></code>: Additional linker flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-libs=FLAGS</span></code>: Additional libraries to link against.</p></li>
</ul>
<p>Some influential environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ICUDT_DIR</span></code>: Optional directory with an already downloaded ICU data
archive (<code class="docutils literal notranslate"><span class="pre">icudt*.zip</span></code>); either an absolute path or a
path relative to <code class="docutils literal notranslate"><span class="pre">&lt;package</span> <span class="pre">source</span> <span class="pre">dir&gt;/src</span></code>; defaults to <code class="docutils literal notranslate"><span class="pre">icuXX/data</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_PATH</span></code>: An optional list of directories to search for
<code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>s <code class="docutils literal notranslate"><span class="pre">.pc</span></code> files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R_HOME</span></code>: Override the R directory, e.g.,
<code class="docutils literal notranslate"><span class="pre">/usr/lib64/R</span></code>. Note that <code class="docutils literal notranslate"><span class="pre">$R_HOME/bin/R</span></code> point to the R executable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CAT</span></code>: The <code class="docutils literal notranslate"><span class="pre">cat</span></code> command used to generate the list of source files to compile.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PKG_CONFIG</span></code>:The <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> command used to fetch the necessary compiler
flags to link to and existing <code class="docutils literal notranslate"><span class="pre">libicu</span></code> installation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_DISABLE_CXX11</span></code>: Disable C++11,
see also <code class="docutils literal notranslate"><span class="pre">--disable-cxx11</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_DISABLE_PKG_CONFIG</span></code>: Compile ICU from sources,
see also <code class="docutils literal notranslate"><span class="pre">--disable-pkg-config</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_DISABLE_ICU_BUNDLE</span></code>: Enforce system ICU,
see also <code class="docutils literal notranslate"><span class="pre">--disable-icu-bundle</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_CFLAGS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-cflags</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_CPPFLAGS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-cppflags</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_CXXFLAGS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-cxxflags</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_LDFLAGS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-ldflags</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_LIBS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-libs</span></code>.</p></li>
</ul>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>We expect that with a correctly configured C++11 compiler and properly
installed system ICU4C distribution, you should face no problems
with installing the package, especially if you use our ICU4C bundle and you
have a working internet access.</p>
<p>If you do not manage to set up a successful stringi build, do not
hesitate to <a class="reference external" href="https://github.com/gagolews/stringi/issues">file a bug report</a>.
However, please check the list of archived (closed) issues first –
it is very likely that a solution to your problem has already been posted.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="news.html" class="btn btn-neutral float-left" title="What Is New in stringi" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2013-2021, Marek Gagolewski.
      <span class="lastupdated">
        Last updated on 2021-05-22 21:42:07.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>